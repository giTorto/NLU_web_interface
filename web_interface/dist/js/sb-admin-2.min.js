/*!
 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
function build_qualifier(e){return console.log("building qualifier"),'<div class="col-lg-3 col-md-6 showable2"><div class="panel '+e.panel+' "><div class="panel-heading"><div class="row"><div class="col-xs-3"><i class="fa '+e.icon+' fa-5x"></i></div><div class="col-xs-9 text-right"><div class="big"><b>'+e.type+"</b></div><div>"+e.value+'</div></div></div></div><div class="panel-footer"><span class="pull-left" id='+e.id+'onclick="showDetails(this.id)" style="cursor: pointer">View Details</span><span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span><div class="clearfix"></div></div></div></div>'}function build_chart(e){return{chart:{container:"#collapsable-example",animateOnInit:!0,node:{collapsable:!0},animation:{nodeAnimation:"easeOutBounce",nodeSpeed:700,connectorsAnimation:"bounce",connectorsSpeed:700}},nodeStructure:{text:{name:"Task"},children:[{text:{name:"Information-Transfer"},children:[{text:{name:"Information-Providing"},children:[{innerHTML:e.Statement},{innerHTML:e.Answer}]},{text:{name:"Information-Seeking"},children:[{innerHTML:e.SetQ},{innerHTML:e.PropQ},{innerHTML:e.ChoiceQ}]}]},{text:{name:"Action-Discussion"},children:[{innerHTML:e.Directive},{innerHTML:e.Commissive}]}]}}}function parseSentence(){console.log("Parse sentence has been called"),current_units=[],$("#fUnits").empty(),$("#qualifier_row").empty(),$("#result-wrapper").hide(),$.getJSON("http://sisl-nlu.disi.unitn.it/parse_USR?sentence="+$("#form_text_to_pass").val(),function(e){console.log(e),$("#functionalUnits").fadeIn(),colors=["#87CEEB","rgb(33, 133, 208)"],current_units=e,$(e.utterances).each(function(e,n){console.log(n),fUnit=$('<span style="padding:25px;font-size:150%"><b style="color:'+colors[e%2]+'; cursor: pointer" onclick="showUnit('+e+')">'+n.final_utterance+"</b></span> "),$("#fUnits").append(fUnit),console.log(n.unit)})})}function showQuestion(){$("#result-wrapper").fadeIn(),$(".showable1").hide(),$(".showable2").fadeIn()}function showDirective(){$(".showable2").hide(),$(".showable1").fadeIn()}function showCommFunc(e){"InfoQ"===e?e="SetQ":"Request"===e?e="Directive":"Offer"===e&&(e="Commissive"),tagsHTML={},$(["Statement","Answer","SetQ","PropQ","ChoiceQ","Directive","Commissive"]).each(function(e,n){tagsHTML[n]="<span>"+n+"</span>"}),tagsHTML[e]='<b style="color:red">'+e+"</b>";var n=build_chart(tagsHTML);tree=new Treant(n)}function showQualifier(e,n){console.log("showing qualifier");var i={};if(i.subjIT={id:"subjIT",panel:"panel-primary",icon:"fa-comments",type:"Subjective InfoType"},i.func={id:"func",panel:"panel-primary",icon:"fa-gears",type:"Functionality"},i.factIT={id:"factIT",panel:"panel-primary",icon:"fa-comment",type:"Factual InfoType"},i.sentiment={id:"sentiment",panel:"panel-primary",icon:"fa-smile-o",type:"Sentiment"},console.log(n),console.log(e),"DA_tag"!==e&&"tense"!==e&&"functionality"!==e){"qtype"===e?e="factIT":"IT_type"===e&&(e="subjIT");var t="",a="";t=i[e],t.value=n.tag,a=$(build_qualifier(t)),$("#qualifier_row").append(a)}}function showUnit(e){console.log("showing unit"),console.log(e),console.log(current_units.utterances[e]),functional_unit=current_units.utterances[e],$("#result-wrapper").fadeIn(),$("#collapsable-example").html(""),showCommFunc(functional_unit.intent.DA_tag.tag),$("#qualifier_row").html(""),qualifiers=functional_unit.intent,Object.keys(qualifiers).forEach(function(e){showQualifier(e,qualifiers[e])})}function showDetails(e){console.log(e),details={},details.gc='The user asked the system to discuss a <span style="color:red"><b>topic</b></span>',details.pov='This information exchange is about a point-of-view. <br/> Confidence: <span style="color:green"><b>very good</b></span>',details.pol="<b><i>politics</i></b> in this sentence can be used as a topic of discussion",$("#"+e).hide(),$("#"+e).html(details[e]),$("#"+e).fadeIn()}$(function(){$("#side-menu").metisMenu()}),$(function(){$(window).bind("load resize",function(){var e=50,n=this.window.innerWidth>0?this.window.innerWidth:this.screen.width;n<768?($("div.navbar-collapse").addClass("collapse"),e=100):$("div.navbar-collapse").removeClass("collapse");var i=(this.window.innerHeight>0?this.window.innerHeight:this.screen.height)-1;i-=e,i<1&&(i=1),i>e&&$("#page-wrapper").css("min-height",i+"px")});for(var e=window.location,n=$("ul.nav a").filter(function(){return this.href==e}).addClass("active").parent();;){if(!n.is("li"))break;n=n.parent().addClass("in").parent()}}),$(function(){$("#side-menu").metisMenu()}),$(function(){$(window).bind("load resize",function(){var e=50,n=this.window.innerWidth>0?this.window.innerWidth:this.screen.width;n<768?($("div.navbar-collapse").addClass("collapse"),e=100):$("div.navbar-collapse").removeClass("collapse");var i=(this.window.innerHeight>0?this.window.innerHeight:this.screen.height)-1;i-=e,i<1&&(i=1),i>e&&$("#page-wrapper").css("min-height",i+"px")});for(var e=window.location,n=$("ul.nav a").filter(function(){return this.href==e}).addClass("active").parent();;){if(!n.is("li"))break;n=n.parent().addClass("in").parent()}}),current_units=[],$("#formParse").submit(function(e){console.log("Submit has been called"),$.get("http://passidin10.science.unitn.it:5000/generate_USR?sentence="+text,function(e){alert("Data: "+e),console.log(e),current_units=e,colors=["#87CEEB","rgb(33, 133, 208)"]})});